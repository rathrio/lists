<% cache ['items-index', *cache_key_for_items(@items)] do %>
  <% cache 'items-search-form' do %>
    <section class="section has-no-bottom-padding">
      <div class="container new-item">
        <%= form_for :item do |f| %>
          <p class="control has-addons">
            <%= f.text_field :name, class: 'input is-large is-expanded filter', placeholder: 'Search', autocomplete: :off, autofocus: :true, data: { 'filter-container' => '.items-list', 'filter-attribute' => 'name' } %>
            <%= link_to scrape_items_path, class: 'button is-large', method: :put, data: { disable_with: spinner } do %>
              <%= icon :magic, size: :medium, tip: 'Multiscrape', tip_pos: 'down' %>
            <% end %>
          </p>
        <% end %>
      </div>
    </section>
  <% end %>

  <% cache cache_key_for_items(@items) do %>
    <section class="section">
      <div class="container items-list">
        <% @items.each do |item| %>
          <%= render 'item', item: item %>
        <% end %>
      </div>
    </section>
  <% end %>
<% end %>
